const a2_0x414258=a2_0x12b6;(function(_0x3ae3f0,_0x324f8a){const _0x211603=a2_0x12b6,_0x45d207=_0x3ae3f0();while(!![]){try{const _0x28c2d1=parseInt(_0x211603(0x11f,'v(Yi'))/0x1*(parseInt(_0x211603(0x122,'Oo[w'))/0x2)+parseInt(_0x211603(0x132,'lj%5'))/0x3*(parseInt(_0x211603(0x124,'O7E&'))/0x4)+-parseInt(_0x211603(0x12b,'MXeS'))/0x5+-parseInt(_0x211603(0x135,'4RQZ'))/0x6+parseInt(_0x211603(0x12f,'FT$&'))/0x7*(parseInt(_0x211603(0x125,'j6qm'))/0x8)+parseInt(_0x211603(0x12c,'48jg'))/0x9+-parseInt(_0x211603(0x136,'%N[5'))/0xa*(parseInt(_0x211603(0x138,'v9o)'))/0xb);if(_0x28c2d1===_0x324f8a)break;else _0x45d207['push'](_0x45d207['shift']());}catch(_0x4cbd44){_0x45d207['push'](_0x45d207['shift']());}}}(a2_0x1bd2,0x4c61e));const a2_0x48017b=(function(){const _0x1052e5={'uUjyw':function(_0x514ea6,_0x8085f1){return _0x514ea6===_0x8085f1;},'gZUyu':'DFerm'};let _0x57d1ac=!![];return function(_0x5c8ba7,_0x3d383f){const _0x5d1884=a2_0x12b6,_0x2491e3={'tQZyw':'pNdzF'};if(_0x1052e5['uUjyw'](_0x1052e5[_0x5d1884(0x127,'zn1W')],_0x1052e5['gZUyu'])){const _0xc4891=_0x57d1ac?function(){if(_0x2491e3['tQZyw']==='pNdzF'){if(_0x3d383f){const _0x52fd8f=_0x3d383f['apply'](_0x5c8ba7,arguments);return _0x3d383f=null,_0x52fd8f;}}else{const _0x3e14d2=_0xaf3230?function(){if(_0x56627b){const _0x1d7859=_0x58e366['apply'](_0x2e7b6d,arguments);return _0x9c27f9=null,_0x1d7859;}}:function(){};return _0x3d43b4=![],_0x3e14d2;}}:function(){};return _0x57d1ac=![],_0xc4891;}else this['handleError'](_0x146644);};}()),a2_0x3ded11=a2_0x48017b(this,function(){return a2_0x3ded11['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](a2_0x3ded11)['search']('(((.+)+)+)+$');});a2_0x3ded11();const a2_0x1e67a5=(function(){const _0x57060a={'prPFq':function(_0x430c04,_0x11d1c6){return _0x430c04!==_0x11d1c6;},'WjvkH':'QqqGq'};let _0x467eed=!![];return function(_0x2707a1,_0x1ad872){const _0x3920da=_0x467eed?function(){const _0x2ee01f=a2_0x12b6;if(_0x1ad872){if(_0x57060a['prPFq'](_0x57060a['WjvkH'],_0x57060a[_0x2ee01f(0x11e,'3mJT')]))_0x24eb69=_0x4ae9ca;else{const _0x54ff31=_0x1ad872[_0x2ee01f(0x12d,'BPON')](_0x2707a1,arguments);return _0x1ad872=null,_0x54ff31;}}}:function(){};return _0x467eed=![],_0x3920da;};}()),a2_0x5ec14d=a2_0x1e67a5(this,function(){const _0x52f977=a2_0x12b6,_0x5ce4af={'dEpwI':function(_0x829893,_0xf700f5){return _0x829893+_0xf700f5;},'IaFhJ':'return\x20(function()\x20','MCStn':function(_0xf9706c){return _0xf9706c();},'IiRCd':_0x52f977(0x11a,'v9o)'),'gEDFJ':'error','ADvHG':'table'},_0x48b08a=function(){let _0x46d680;try{_0x46d680=Function(_0x5ce4af['dEpwI'](_0x5ce4af['IaFhJ'],'{}.constructor(\x22return\x20this\x22)(\x20)')+');')();}catch(_0x4f09e8){_0x46d680=window;}return _0x46d680;},_0x59ffff=_0x5ce4af['MCStn'](_0x48b08a),_0x4fc41e=_0x59ffff['console']=_0x59ffff['console']||{},_0x495815=[_0x5ce4af['IiRCd'],'warn',_0x52f977(0x120,')#0r'),_0x5ce4af[_0x52f977(0x134,'TbsD')],'exception',_0x5ce4af['ADvHG'],'trace'];for(let _0x1f0685=0x0;_0x1f0685<_0x495815['length'];_0x1f0685++){const _0x5a5be9=a2_0x1e67a5['constructor']['prototype']['bind'](a2_0x1e67a5),_0x3babf1=_0x495815[_0x1f0685],_0x1643a0=_0x4fc41e[_0x3babf1]||_0x5a5be9;_0x5a5be9['__proto__']=a2_0x1e67a5['bind'](a2_0x1e67a5),_0x5a5be9['toString']=_0x1643a0['toString']['bind'](_0x1643a0),_0x4fc41e[_0x3babf1]=_0x5a5be9;}});a2_0x5ec14d();import{HttpsProxyAgent}from'https-proxy-agent';import{SocksProxyAgent}from'socks-proxy-agent';import{Helper}from'../utils/helper.js';import{API}from'./api/api.js';import a2_0x5ef004 from'../utils/logger.js';export default class Core extends API{constructor(_0x5425a9,_0x3f954d){const _0x40008e={'gkTMO':'3|7|1|5|6|2|0|4'},_0x1a090b=_0x40008e['gkTMO']['split']('|');let _0x2ebc5e=0x0;while(!![]){switch(_0x1a090b[_0x2ebc5e++]){case'0':this['point']={'pointsToday':0x0,'pointsTotal':0x0};continue;case'1':this['socket']=null;continue;case'2':this['pingInterval']=0x0;continue;case'3':super('https://ikknngrgxuxgjhplbpey.supabase.co',_0x3f954d);continue;case'4':this['pingCount']=0x0;continue;case'5':this['wssReconnectAttempts']=0x0;continue;case'6':this['maxwssReconnectAttempts']=0x5;continue;case'7':this['acc']=_0x5425a9;continue;}break;}}async['login'](){const _0x1d2f64=a2_0x12b6,_0x86df1c={'WHXBh':'POST','SCiLq':function(_0x3fdcfa,_0x595045){return _0x3fdcfa==_0x595045;},'eCrzj':function(_0x95d5c9,_0x23a311){return _0x95d5c9===_0x23a311;}};await Helper['delay'](0x3e8,this['acc'],'Try\x20to\x20login...',this);const _0x4d25af=await this['fetch']('/auth/v1/token?grant_type=password',_0x86df1c['WHXBh'],undefined,{'email':this['acc']['email'],'password':this['acc']['password'],'gotrue_meta_security':{}});_0x86df1c[_0x1d2f64(0x130,'[k0Y')](_0x4d25af['status'],0xc8)?_0x86df1c['eCrzj']('aNbfe',_0x1d2f64(0x137,'Of@P'))?(this['token']=_0x2b7f33[_0x1d2f64(0x12e,'vEBW')],this['refreshToken']=_0x241d6a['refresh_token'],this['user']=_0x53aa3d['user']):(this['token']=_0x4d25af['access_token'],this['refreshToken']=_0x4d25af['refresh_token'],this['user']=_0x4d25af['user']):this['handleError'](_0x4d25af);}async[a2_0x414258(0x11b,'i%f[')](){const _0x3d77cf=a2_0x414258,_0x46a15e={'EXEjW':function(_0x571c06,_0x1066a2){return _0x571c06==_0x1066a2;}};await Helper['delay'](0x3e8,this['acc'],'Getting\x20User\x20Information...',this);const _0x361956=await this['fetch']('/auth/v1/user','GET',this['token']);_0x46a15e['EXEjW'](_0x361956['status'],0xc8)?this[_0x3d77cf(0x11d,'rsVa')]=_0x361956:this['handleError'](_0x361956);}async['connectWebSocket'](){const _0xd386ce=a2_0x414258,_0x4fda97={'UcxNq':'WebSocket\x20connection\x20opened.','zftAW':function(_0x27071e,_0xd2f284){return _0x27071e+_0xd2f284;},'sIoHi':'fjChE'};let _0x16f12c;if(this['proxy']){if(this['proxy']['startsWith']('http'))_0x16f12c=new HttpsProxyAgent(this['proxy']);if(this['proxy']['startsWith']('socks'))_0x16f12c=new SocksProxyAgent(this['proxy']);}this['socketURL']='wss://secure.ws.teneo.pro/websocket?userId='+this['user']['id']+'&version=v0.2',this[_0xd386ce(0x126,'FfC8')]=new WebSocket(this['socketURL'],{'agent':_0x16f12c}),this['socket']['onopen']=async()=>{await Helper['delay'](0x1f4,this['acc'],_0x4fda97['UcxNq'],this),this['wssReconnectAttempts']=0x0;},this['socket']['onmessage']=async _0x4648b3=>{const _0x372a44=_0xd386ce,_0x51b3af={'bsyLI':function(_0x146d6e,_0x5c38a4){return _0x4fda97['zftAW'](_0x146d6e,_0x5c38a4);},'WrNor':'return\x20(function()\x20'},_0x17e284=JSON['parse'](_0x4648b3['data']);a2_0x5ef004['info'](_0x4648b3['data']),await Helper[_0x372a44(0x11c,'6(0L')](0x7d0,this['acc'],'Received\x20message:\x20'+_0x17e284['message'],this);if(_0x17e284['pointsToday']){if('fjChE'!==_0x4fda97['sIoHi']){let _0x155ef5;try{_0x155ef5=_0x4ac7ab(uQZvPC['bsyLI'](uQZvPC['WrNor'],'{}.constructor(\x22return\x20this\x22)(\x20)')+');')();}catch(_0x4ab6e0){_0x155ef5=_0x2a06be;}return _0x155ef5;}else this['point']={'pointsToday':_0x17e284['pointsToday'],'pointsTotal':_0x17e284['pointsTotal']},await Helper[_0x372a44(0x13a,'u#Ob')](0x3e8,this['acc'],'User\x20Point\x20Updated',this);}this['startPing']();},this['socket']['onerror']=async _0x1f0267=>{await Helper['delay'](0x1f4,this['acc'],'WebSocket\x20error:\x20'+_0x1f0267,this);},this[_0xd386ce(0x126,'FfC8')]['onclose']=async _0x230488=>{const _0x399f81=_0xd386ce;_0x230488['wasClean']?await Helper['delay'](0x1f4,this['acc'],'WebSocket\x20connection\x20closed\x20cleanly.',this):await Helper[_0x399f81(0x12a,'[k0Y')](0x1f4,this[_0x399f81(0x139,'hr8s')],'WebSocket\x20connection\x20closed\x20unexpectedly.',this),await this['stopPing'](),await this['reconnectWebSocket']();};}async['reconnectWebSocket'](){const _0x2e67a8=a2_0x414258,_0x9bbe48={'gAbzt':function(_0x113a98,_0x121ed1){return _0x113a98*_0x121ed1;}};if(this['wssReconnectAttempts']<this['maxwssReconnectAttempts']){this[_0x2e67a8(0x128,'[i#w')]+=0x1;const _0x2349b9=Math['min'](0x1388,_0x9bbe48['gAbzt'](0x3e8,this[_0x2e67a8(0x123,'lj%5')]));Helper[_0x2e67a8(0x133,'!2X7')](_0x2349b9,this['acc'],'Attempting\x20to\x20reconnect\x20(#'+this['wssReconnectAttempts']+')...',this)['then'](()=>this['connectWebSocket']());}else Helper['delay'](0x3e8,this['acc'],'Max\x20reconnect\x20attempts\x20reached.\x20Could\x20not\x20reconnect\x20to\x20WebSocket.',this);}async['sendPing'](){const _0x3bcde8=a2_0x414258,_0x2e982a={'NWPcG':'PING'};this['pingCount']=this['pingCount']+0x1,await Helper['delay'](0x0,this['acc'],'Sending\x20PING\x20'+this['pingCount'],this),this['socket']['send'](JSON['stringify']({'type':_0x2e982a['NWPcG']})),await Helper['delay'](0x2710,this['acc'],'PING\x20'+this[_0x3bcde8(0x131,'gFq5')]+'\x20Sended',this);}async['startPing'](){const _0x228e24=a2_0x414258,_0x1d8e90={'dzaJZ':function(_0x59e213,_0x553658){return _0x59e213===_0x553658;},'alPXC':'eDRLX'};!this['pingInterval']&&(await Helper[_0x228e24(0x121,'zUlW')](0x0,this['acc'],'Starting\x20PING\x20interval,\x20Ping\x20will\x20be\x20send\x20every\x2010\x20Seconds',this),this['pingInterval']=setInterval(async()=>{if(this['socket']&&_0x1d8e90['dzaJZ'](this['socket']['readyState'],WebSocket['OPEN'])){if(_0x1d8e90['dzaJZ']('DvwHd',_0x1d8e90['alPXC'])){this['wssReconnectAttempts']+=0x1;const _0x35124a=_0x57ad9d['min'](0x1388,0x3e8*this['wssReconnectAttempts']);_0x4b082c['delay'](_0x35124a,this['acc'],'Attempting\x20to\x20reconnect\x20(#'+this['wssReconnectAttempts']+')...',this)['then'](()=>this['connectWebSocket']());}else await this['sendPing']();}},0x2710));}async['stopPing'](){const _0x3b4f8f=a2_0x414258,_0xaf7824={'UPgxG':function(_0x987f0f,_0x3dc06a){return _0x987f0f(_0x3dc06a);}};this['pingInterval']&&(_0xaf7824['UPgxG'](clearInterval,this[_0x3b4f8f(0x129,'!2X7')]),this['pingInterval']=null);}async['handleError'](_0x5c291f){throw _0x5c291f;}}function a2_0x12b6(_0x5be98a,_0x196276){const _0x4df537=a2_0x1bd2();return a2_0x12b6=function(_0x5ec14d,_0x1e67a5){_0x5ec14d=_0x5ec14d-0x11a;let _0x31a07e=_0x4df537[_0x5ec14d];if(a2_0x12b6['gIGPlh']===undefined){var _0x4604a7=function(_0x3368c9){const _0x586ef2='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x21e4e4='',_0xbbb8c7='',_0x5cbe93=_0x21e4e4+_0x4604a7;for(let _0x4b0757=0x0,_0xd0f4c3,_0x4a9a41,_0x29b64e=0x0;_0x4a9a41=_0x3368c9['charAt'](_0x29b64e++);~_0x4a9a41&&(_0xd0f4c3=_0x4b0757%0x4?_0xd0f4c3*0x40+_0x4a9a41:_0x4a9a41,_0x4b0757++%0x4)?_0x21e4e4+=_0x5cbe93['charCodeAt'](_0x29b64e+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0xd0f4c3>>(-0x2*_0x4b0757&0x6)):_0x4b0757:0x0){_0x4a9a41=_0x586ef2['indexOf'](_0x4a9a41);}for(let _0x21692b=0x0,_0x14a4ae=_0x21e4e4['length'];_0x21692b<_0x14a4ae;_0x21692b++){_0xbbb8c7+='%'+('00'+_0x21e4e4['charCodeAt'](_0x21692b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xbbb8c7);};const _0x12b650=function(_0x3a760e,_0xaf3230){let _0x6d4def=[],_0x557266=0x0,_0x24e99c,_0x409222='';_0x3a760e=_0x4604a7(_0x3a760e);let _0x3d43b4;for(_0x3d43b4=0x0;_0x3d43b4<0x100;_0x3d43b4++){_0x6d4def[_0x3d43b4]=_0x3d43b4;}for(_0x3d43b4=0x0;_0x3d43b4<0x100;_0x3d43b4++){_0x557266=(_0x557266+_0x6d4def[_0x3d43b4]+_0xaf3230['charCodeAt'](_0x3d43b4%_0xaf3230['length']))%0x100,_0x24e99c=_0x6d4def[_0x3d43b4],_0x6d4def[_0x3d43b4]=_0x6d4def[_0x557266],_0x6d4def[_0x557266]=_0x24e99c;}_0x3d43b4=0x0,_0x557266=0x0;for(let _0x56627b=0x0;_0x56627b<_0x3a760e['length'];_0x56627b++){_0x3d43b4=(_0x3d43b4+0x1)%0x100,_0x557266=(_0x557266+_0x6d4def[_0x3d43b4])%0x100,_0x24e99c=_0x6d4def[_0x3d43b4],_0x6d4def[_0x3d43b4]=_0x6d4def[_0x557266],_0x6d4def[_0x557266]=_0x24e99c,_0x409222+=String['fromCharCode'](_0x3a760e['charCodeAt'](_0x56627b)^_0x6d4def[(_0x6d4def[_0x3d43b4]+_0x6d4def[_0x557266])%0x100]);}return _0x409222;};a2_0x12b6['jNHDVI']=_0x12b650,_0x5be98a=arguments,a2_0x12b6['gIGPlh']=!![];}const _0x3ded11=_0x4df537[0x0],_0x48017b=_0x5ec14d+_0x3ded11,_0x1bd23a=_0x5be98a[_0x48017b];if(!_0x1bd23a){if(a2_0x12b6['MAqbQJ']===undefined){const _0x47acbf=function(_0x290cdd){this['ZmFptH']=_0x290cdd,this['YoUrBS']=[0x1,0x0,0x0],this['nfWUjU']=function(){return'newState';},this['NGTYgX']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['JEXfRQ']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x47acbf['prototype']['dQhYYD']=function(){const _0x5e9914=new RegExp(this['NGTYgX']+this['JEXfRQ']),_0x58e366=_0x5e9914['test'](this['nfWUjU']['toString']())?--this['YoUrBS'][0x1]:--this['YoUrBS'][0x0];return this['IlXSRp'](_0x58e366);},_0x47acbf['prototype']['IlXSRp']=function(_0x2e7b6d){if(!Boolean(~_0x2e7b6d))return _0x2e7b6d;return this['xSljbr'](this['ZmFptH']);},_0x47acbf['prototype']['xSljbr']=function(_0x9c27f9){for(let _0x49cd83=0x0,_0x12a762=this['YoUrBS']['length'];_0x49cd83<_0x12a762;_0x49cd83++){this['YoUrBS']['push'](Math['round'](Math['random']())),_0x12a762=this['YoUrBS']['length'];}return _0x9c27f9(this['YoUrBS'][0x0]);},new _0x47acbf(a2_0x12b6)['dQhYYD'](),a2_0x12b6['MAqbQJ']=!![];}_0x31a07e=a2_0x12b6['jNHDVI'](_0x31a07e,_0x1e67a5),_0x5be98a[_0x48017b]=_0x31a07e;}else _0x31a07e=_0x1bd23a;return _0x31a07e;},a2_0x12b6(_0x5be98a,_0x196276);}function a2_0x1bd2(){const _0x2c0a35=['WPjnW4xdJsm','WQGmumkeW6pdNCk6tmkd','W6CfW71D','WQG8W6pdJti','sfK3WOhdMgzGWOuV','m8o0BCkoy8oLcCkQreD2W63cKSkEbSkXW5mujtS','gCknh2D8sMdcL8kOAeG','WOFcIXldImoBW5/cPCk7','zCoqFmkqmmoC','W63cMLpdRmkg','WPDwW7mquIFdHd0eya5ZWOpcPZldLmoFW6HKW70','WRtcRMldNYFcHNVcO8kWW6GFW5G','WRJcVmoPwIq','W6RcI33cKI8XWQtdLMqKvXq','WRHZW6GrW4ZcNNK+W63dPYu/qa','WODOW4xdPb8','WP3cVGFdQCkvvSogWQpdM8o4WQqH','W4z5xCkyW44NWR7dNalcUdBcU3W','WO/cMSoSDYW','W7rMWPpdLwxdRmoJWO/cSq','CSk+umkwr8ook8kH','WQdcOMddMrC','gL3cUa0E','WRFcVmkGdrlcNbRcPSk/s2SxnW','WRlcTMuEWRGqgx8','aNeiWP3dGW','gahcTsFdOYhcG3hcIbRcISoJ','jG1Z','WPRdNmoxW6KO','r1/dOW','kdFcLr7cSCozEW','WQ02WPxdLee','Dw3cLXW'];a2_0x1bd2=function(){return _0x2c0a35;};return a2_0x1bd2();}